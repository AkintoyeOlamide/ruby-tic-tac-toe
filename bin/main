#!/usr/bin/env ruby
require_relative("../lib/players.rb")
require_relative("../lib/board.rb")

def player_name
  p "Hey player, whats your name?"
  name = gets.chomp
  return name
end

def player_token(player_name)
  p "Hello #{player_name}, Please select a token X or O"
  token = gets.chomp
  if Players.validate_token?(token)
    p "#{token}, Nice choice!"
    return token.capitalize
  else
    p "Invalid token, please choose X or O"
    player_token(player_name)
  end
end

player1_name = player_name
player1_token = player_token(player1_name)
player1 = Players.new(player1_name, player1_token)

player2_name = player_name
player2_token = player1_token == 'X' ? 'O' : 'X'
player2 = Players.new(player2_name, player2_token)

players = [{name: player1.name, token: player1_token}, {name: player2.name, token: player2_token}]

board = Board.new(players)

def get_player_move
  puts "Please select a number from the board:"
  select_number = gets.chomp.to_i
  return select_number
end 

select_number = get_player_move

if board.position_validation?(select_number)
  board.change_board(select_number)
else   
  get_player_move
end



# def change_board(token,player)
#   puts "It's #{player} turn."
#   get_player_move
#   board_flatten = $board_display.flatten
#   board_flatten[$select_number - 1] = token
#   $board_display = board_flatten.each_slice(3).to_a
#   $board_display.each { |n| p n }
# end
